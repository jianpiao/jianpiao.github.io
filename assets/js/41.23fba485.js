(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{366:function(t,s,a){"use strict";a.r(s);var n=a(33),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"实践的思考与总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#实践的思考与总结"}},[t._v("#")]),t._v(" 实践的思考与总结")]),t._v(" "),a("p",[t._v("Phaser游戏开发过程中，会遇到很多稀奇古怪的小问题，最后能够迎刃而解，少不了日常踩坑的思考以及最后给出解决方案。在这里总结一下。")]),t._v(" "),a("h2",{attrs:{id:"物理引擎"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#物理引擎"}},[t._v("#")]),t._v(" 物理引擎")]),t._v(" "),a("p",[t._v("往期的游戏中，我们用到了"),a("code",[t._v("arcade")]),t._v("物理系统，实现摘星星中任务的跳跃、星星的摘取、炸弹的碰撞。也用到了"),a("code",[t._v("p2")]),t._v("物理系统，实现红包雨下落的重叠、不规则下落。此外还有另外一种物理系统 —— "),a("code",[t._v("Ninja")]),t._v("。它们三者有什么区别，在什么场景下使用最优，下面就来讲解一下。")]),t._v(" "),a("h3",{attrs:{id:"物理系统"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#物理系统"}},[t._v("#")]),t._v(" 物理系统")]),t._v(" "),a("p",[t._v("Phaser提供三种物理系统，它们分别是：")]),t._v(" "),a("ol",[a("li",[t._v("Arcade：街机物理处理系统。包含碰撞、重叠和运动相关的方法。")]),t._v(" "),a("li",[t._v("P2：P2的物理系统。包含碰撞、重叠和运动相关的方法。")]),t._v(" "),a("li",[t._v("Ninja：忍者物理系统。包含碰撞、重叠和运动相关的方法")])]),t._v(" "),a("h3",{attrs:{id:"差异"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#差异"}},[t._v("#")]),t._v(" 差异")]),t._v(" "),a("p",[t._v("Phaser包含了我们常用的"),a("code",[t._v("Arcade Physics")]),t._v("系统，以及"),a("code",[t._v("Ninja Physics")]),t._v("和"),a("code",[t._v("P2.JS")]),t._v("全身物理系统。")]),t._v(" "),a("p",[a("code",[t._v("Arcade Physics")]),t._v("（街机物理系统）仅适用于高速AABB碰撞。AABB表示轴对齐的有界矩形，这就意味着所有的碰撞都是基于一个矩阵边界来计算的，所以如果想碰撞一个圆形的精灵（sprite）碰撞的则是它的实际矩阵边界，而不是原型本身设定的边界，这就导致它无法实现非矩阵精灵的物理场景。此外它支持摩擦力、重力、弹跳、加速等物理属性，适合应用精度要求不高，较为简单的游戏物理场景中。（例子：摘星星使用了重叠和碰撞）。")]),t._v(" "),a("p",[a("code",[t._v("Ninja Physics")]),t._v("（忍者物理系统）允许使用复杂的砖块和坡度，特别适合水平舞台。"),a("code",[t._v("Arcade Physics")]),t._v("不适合旋转物理精灵，"),a("code",[t._v("Ninja Physics")]),t._v("弥补了它的缺陷，可以处理物理旋转，"),a("code",[t._v("Ninja Physics")]),t._v("可以使精灵倾斜和复杂的平铺，这是更加灵活（可能更准确）的物理模型，但缺点是计算比较慢。")]),t._v(" "),a("p",[a("code",[t._v("P2 Physics")]),t._v("是一个全身物理系统，具有约束，弹簧，多边形支撑等。如果游戏需要对弹簧力的约束（例如：摆钟左右摇晃摆动）以及任意多边形形状（例如：四面体）进行建模，它更符合需求。（例子：红包雨使用到了四面体建模，愤怒的小鸟使用到了弹簧和多面体建模）")]),t._v(" "),a("p",[t._v("假如游戏中不需要用到复杂的物理动作，完全可以直接使用"),a("code",[t._v("Arcade Physics")]),t._v("，它使用简单，计算简单，性能消耗低。其他两个物理系统物理属性更为复杂且功能丰富，以性能消耗为代价。")]),t._v(" "),a("h3",{attrs:{id:"物理属性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#物理属性"}},[t._v("#")]),t._v(" 物理属性")]),t._v(" "),a("p",[t._v("三个物理系统的物理属性API有些许差异，下面来介绍一下。")]),t._v(" "),a("p",[t._v("每一种物理属性需要在create阶段启动，确保精灵创建之前能被分配到指定物理系统，否则会出现错误。")]),t._v(" "),a("blockquote",[a("p",[t._v("下面代码以arcade为例。")]),t._v(" "),a("p",[t._v("如使用p2则改为：game.physics.startSystem(Phaser.Physics.P2JS);")]),t._v(" "),a("p",[t._v("如使用Ninja则为：game.physics.startSystem(Phaser.Physics.Ninja);")])]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" game"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Phaser"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Game")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//开启物理引擎")]),t._v("\ngame"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("physics"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("startSystem")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Phaser"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Physics"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ARCADE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" sprite"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("game"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("add"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sprite")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//在sprite上启用arcade物理引擎")]),t._v("\ngame"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("physics"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("enable")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sprite"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("Phaser"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Physics"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ARCADE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n")])])]),a("h4",{attrs:{id:"arcade物理属性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#arcade物理属性"}},[t._v("#")]),t._v(" Arcade物理属性")]),t._v(" "),a("p",[t._v("速度velocity属性。")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("sprite"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("velocity"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Phaser"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Point")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nsprite"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("velocity"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nsprite"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("velocity"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("x"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//X轴的速度（正数往右，负数往左）")]),t._v("\n\nsprite"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("velocity"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("y"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//Y轴的速度（正数往下，负数往上）")]),t._v("\n")])])]),a("p",[t._v("加速度acceleration属性。")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("sprite"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("acceleration"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Phaser"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Point")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  \n\nsprite"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("acceleration"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  \n\nsprite"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("acceleration"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("x"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//X轴的加速度")]),t._v("\n\nsprite"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("acceleration"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("y"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//Y轴的加速度")]),t._v("\n")])])]),a("p",[t._v("阻力drag")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("sprite"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("drag"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Phaser"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Point")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nsprite"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("drag"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nsprite"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("drag"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("x"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nsprite"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("drag"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("y"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("重力gravity")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("sprite"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("gravity"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Phaser"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Point")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nsprite"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("gravity"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nsprite"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("gravity"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("x"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nsprite"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("gravity"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("y"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("弹跳bounce")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("sprite"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("bounce"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Phaser"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Point")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nsprite"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("bounce"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nsprite"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("bounce"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("x"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nsrpite"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("bounce"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("y"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.5")]),t._v("\n")])])]),a("p",[t._v("其他属性")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("sprite"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("friction"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//设置与其他物体接触时的摩擦力")]),t._v("\n\nsprite"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("rotation"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("Math"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PI")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//设置角度")]),t._v("\n\nsprite"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("immovable"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//设置该物体是固定的（true）还是不固定的（false）")]),t._v("\n\nsprite"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mass"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//设置物体的相对质量，默认为1")]),t._v("\n\nsprite"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("maxVelocity"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//设置最大速度")]),t._v("\n\nsprite"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("maxAngular"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//设置最大角速度")]),t._v("\n\nsprite"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setSize")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("width"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("height"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("offsetX"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("offsetY"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//设置body的范围")]),t._v("\n\nsprite"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("reset")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("y"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//重置所有的物理属性")]),t._v("\n\nsprite"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("touching"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("down \nsprite"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("touching"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("up  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 返回true/false，该物体的底部或顶部是否与其他物体接触")]),t._v("\n")])])]),a("h4",{attrs:{id:"arcade碰撞"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#arcade碰撞"}},[t._v("#")]),t._v(" Arcade碰撞")]),t._v(" "),a("p",[t._v("arcade只支持AABB（矩形）之间的碰撞检测，并且"),a("code",[t._v("overlap")]),t._v("方法不产生效果，所以，应该使用"),a("code",[t._v("collide")]),t._v("方法。")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" game"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Phaser"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Game")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" sprite1"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("game"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("add"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sprite")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" sprite2"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("game"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("add"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sprite")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\ngame"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("physics"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("arcade"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("collide")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sprite1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("sprite2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// collide方法不仅会检测两个物体之间的碰撞，而且会产生碰撞的物理效果，而overlap不会产生碰撞效果")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("精灵与组的碰撞（摘星星游戏就是使用了这个碰撞方案）")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" game"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Phaser"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Game")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" sprite"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("game"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("add"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sprite")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" group"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("game"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("add"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("group")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//检测精灵与组之间的碰撞")]),t._v("\ngame"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("physics"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("arcade"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("collide")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sprite"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("group"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("组和组的碰撞")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" game"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Phaser"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Game")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" group"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("game"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("add"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("group")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//检测组内的元素的碰撞")]),t._v("\ngame"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("physics"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("arcade"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("collide")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("group"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h4",{attrs:{id:"p2物理属性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#p2物理属性"}},[t._v("#")]),t._v(" P2物理属性")]),t._v(" "),a("p",[t._v("重力和速度")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("game"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("physics"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("p2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("gravity"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("y"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 给所有物体添加重力加速度")]),t._v("\n")])])]),a("p",[t._v("摩擦力")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("game"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("physics"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("p2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("friction"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 碰撞物体间的摩擦力")]),t._v("\n")])])]),a("p",[t._v("碰撞恢复")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("game"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("physics"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("p2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("restitution"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.8")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 碰撞物体间的恢复系数")]),t._v("\n")])])]),a("p",[t._v("碰撞检测")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 启动p2物理系统")]),t._v("\ngame"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("physics"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("startSystem")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Phaser"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Phaser"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("P2JS")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 打开影响事件的世界，如果没有设置为true，我们不能得到碰撞回调   ")]),t._v("\ngame"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("physics"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("p2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setImpactEvents")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//创建碰撞组")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" collisionGroup1"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("game"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("physics"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("p2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createCollisionGroup")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" collisionGtoup2"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("game"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("physics"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("p2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createCollisionGroup")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 如果我们监听自己的碰撞，必须调用此来更新碰撞组")]),t._v("\ngame"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("physics"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("p2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("updateBoundsCollisionGroup")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" sprite1"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("game"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("add"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sprite")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" sprite2"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("game"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("add"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sprite")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 保证物体启动物理特性")]),t._v("\ngame"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("physics"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("p2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("enable")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sprite1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("   \n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//给物体添加collisionGroup1碰撞组 ")]),t._v("\nsprite1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setCollisionGroup")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("collisionGroup1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  \nsprite1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("collides")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("collisionGroup2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h4",{attrs:{id:"ninja物理属性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ninja物理属性"}},[t._v("#")]),t._v(" Ninja物理属性")]),t._v(" "),a("p",[a("code",[t._v("Ninja")]),t._v("的属性特别多，不仅包含了"),a("code",[t._v("Arcade")]),t._v("的所有属性，额外多出来好几十种物理属性，所以这里不做一一介绍了，可以参考"),a("a",{attrs:{href:"https://www.w3cschool.cn/doc_phaser/phaser-phaser-physics-ninja.html?lang=en",target:"_blank",rel:"noopener noreferrer"}},[t._v("Ninjs物理属性列表"),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("h2",{attrs:{id:"sprite和group用作容器的异同"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sprite和group用作容器的异同"}},[t._v("#")]),t._v(" Sprite和Group用作容器的异同")]),t._v(" "),a("p",[t._v("我们经常会用到容器的概念，在Phaser中，最常用作容器的就是"),a("code",[t._v("Group")]),t._v("和"),a("code",[t._v("Sprite")]),t._v("。"),a("code",[t._v("Word")]),t._v("就是游戏中最底层的一个容器。")]),t._v(" "),a("h3",{attrs:{id:"添加子对象的方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#添加子对象的方法"}},[t._v("#")]),t._v(" 添加子对象的方法")]),t._v(" "),a("p",[a("code",[t._v("Sprite")]),t._v("常用方法是"),a("code",[t._v("addChild()")])]),t._v(" "),a("p",[a("code",[t._v("Group")]),t._v("添加子对象的方法很多个，如"),a("code",[t._v("add()")]),t._v("、"),a("code",[t._v("addChild()")]),t._v("、"),a("code",[t._v("create()")])]),t._v(" "),a("h3",{attrs:{id:"两者都继承了displayobjectcontainer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#两者都继承了displayobjectcontainer"}},[t._v("#")]),t._v(" 两者都继承了DisplayObjectContainer")]),t._v(" "),a("p",[a("code",[t._v("Sprite")]),t._v("和"),a("code",[t._v("Group")]),t._v("的容器功能都继承自"),a("code",[t._v("DisplayObjectContainer")]),t._v("，但"),a("code",[t._v("DisplayObjectContainer")]),t._v("的一些原有的属性方法在"),a("code",[t._v("Sprite")]),t._v("中被重写了，比如"),a("code",[t._v("width")]),t._v("、"),a("code",[t._v("height")]),t._v("、"),a("code",[t._v("getBounds()")]),t._v("等；而"),a("code",[t._v("Group")]),t._v("则完整的继承了"),a("code",[t._v("DisplayObjectContainer")]),t._v("的属性方法，如果单纯作为容器使用，"),a("code",[t._v("Group")]),t._v("应该更合适，更专业。")]),t._v(" "),a("h3",{attrs:{id:"关于textture和层级关系"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#关于textture和层级关系"}},[t._v("#")]),t._v(" 关于TextTure和层级关系")]),t._v(" "),a("p",[a("code",[t._v("Sprite")]),t._v("有自己的"),a("code",[t._v("texture")]),t._v("，显示内容将会在它所有"),a("code",[t._v("children")]),t._v("的最底层，相当于背景（根据先画的垫底，后画的在上的渲染规则，以及先有父才有子的关系，所以不难理解）")]),t._v(" "),a("p",[t._v("而"),a("code",[t._v("Group")]),t._v(" 没有自己的"),a("code",[t._v("texture")]),t._v("，他只是一个纯容器，如同空气没有显示的东西，所以他自身跟"),a("code",[t._v("children")]),t._v("没有显示上的层级关系，只有"),a("code",[t._v("children")]),t._v("们各自之间的层级关系。")]),t._v(" "),a("h3",{attrs:{id:"与children的关系"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#与children的关系"}},[t._v("#")]),t._v(" 与Children的关系")]),t._v(" "),a("p",[a("code",[t._v("Sprite")]),t._v("作为容器，它的child一般是一个整体的一部分，比如一个飞机，可以有机身、机翼、螺旋桨，如果这些都是单独的素材，那么我们可以把飞机定义为一个"),a("code",[t._v("Sprite")]),t._v("，然后机身、机翼、螺旋桨作为它的孩子，通过"),a("code",[t._v("addChild")]),t._v("来加入。它的特点是共享父精灵的物理属性（比如位移、旋转），并且它们之间的相对位置固定。")]),t._v(" "),a("p",[t._v("如果是一群飞机，这时候我们建议使用"),a("code",[t._v("Group")]),t._v("，每一个飞机都是独立个体，有自己的位移、旋转等，并且它们的相对位置并不固定，有时可以挨得很近，有时可以离得很远。")]),t._v(" "),a("h2",{attrs:{id:"解决低端设备卡顿的问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#解决低端设备卡顿的问题"}},[t._v("#")]),t._v(" 解决低端设备卡顿的问题")]),t._v(" "),a("p",[t._v("在低端的设计处理速度会比较慢，容易造成视觉卡顿现象。")]),t._v(" "),a("p",[t._v("在Phaser中，可以通过设置"),a("code",[t._v("game.time.desiredFps")]),t._v("来解决，这个默认值是60FPS，但是在一些低端手机，会有些高，需要对游戏进行降频，降到30FPS。")]),t._v(" "),a("p",[t._v("解决的方案是在一秒钟内计算"),a("code",[t._v("update")]),t._v("被调动的次数，如果很低，那么就调整"),a("code",[t._v("game.time.desiredFps")]),t._v("的值。")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 一秒内刷新")]),t._v("\ngame"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("time"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("events"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("loop")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Phaser"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Timer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("SECOND")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("checkoutFPS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 检查fps帧率")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("checkoutFPS")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("isSetTps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fpsTestEnd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fpsCount "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      game"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("time"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("desiredFps "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      game"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("time"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("desiredFps "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" fpsCount "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v("\n      isSetTps "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    fpsCount"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"sprite层级"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sprite层级"}},[t._v("#")]),t._v(" Sprite层级")]),t._v(" "),a("p",[a("code",[t._v("sprite")]),t._v("的层级是由"),a("code",[t._v("sprite")]),t._v("创建顺序决定的，"),a("code",[t._v("sprite")]),t._v("创建顺序越往后层级越高（越在上面）。")]),t._v(" "),a("p",[t._v("可能有人有这样的场景，后面的是动态添加的，只能后添加，却希望它在最底层。那么这时候只需要调用"),a("code",[t._v("sprite")]),t._v("中的"),a("code",[t._v("bringToTop")]),t._v("，它可以将某一个"),a("code",[t._v("sprite")]),t._v("拉到最高层。")]),t._v(" "),a("p",[t._v("同理，还有"),a("code",[t._v("sendToBack")]),t._v("，它可以将精灵放到最低层。")]),t._v(" "),a("p",[t._v("但是要注意，通过这种方式调整层级顺序，精灵必须位于同一个组内，也就是他们互为兄弟节点。")]),t._v(" "),a("h2",{attrs:{id:"总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),a("p",[t._v("以上是在游戏开发过程遇到的问题，以及最后的解决方案。")]),t._v(" "),a("p",[t._v("开发游戏是一个艰辛而又有乐趣的过程，享受游戏一步一步制作的乐趣，它不像软件应用，做出来各个流程体验一下就过去了，游戏可以反复把玩，设定各种难度和关卡，一步一步登天。")]),t._v(" "),a("h2",{attrs:{id:"参考文献"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考文献"}},[t._v("#")]),t._v(" 参考文献")]),t._v(" "),a("p",[a("a",{attrs:{href:"http://club.phaser-china.com/?tab=good",target:"_blank",rel:"noopener noreferrer"}},[t._v("phaser社区"),a("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=e.exports}}]);